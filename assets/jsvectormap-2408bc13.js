var U=function(s){return W(s)&&!B(s)};function W(i){return!!i&&typeof i=="object"}function B(i){var s=Object.prototype.toString.call(i);return s==="[object RegExp]"||s==="[object Date]"||Z(i)||$(i)}var N=typeof Symbol=="function"&&Symbol.for,q=N?Symbol.for("react.element"):60103;function $(i){return i.$$typeof===q}function Z(i){return i instanceof Node}function K(i){return Array.isArray(i)?[]:{}}function j(i,s){return s.clone!==!1&&s.isMergeableObject(i)?E(K(i),i,s):i}function J(i,s,a){return i.concat(s).map(function(e){return j(e,a)})}function Q(i,s){if(!s.customMerge)return E;var a=s.customMerge(i);return typeof a=="function"?a:E}function ee(i){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(i).filter(function(s){return i.propertyIsEnumerable(s)}):[]}function z(i){return Object.keys(i).concat(ee(i))}function I(i,s){try{return s in i}catch{return!1}}function te(i,s){return I(i,s)&&!(Object.hasOwnProperty.call(i,s)&&Object.propertyIsEnumerable.call(i,s))}function ie(i,s,a){var e={};return a.isMergeableObject(i)&&z(i).forEach(function(t){e[t]=j(i[t],a)}),z(s).forEach(function(t){te(i,t)||(I(i,t)&&a.isMergeableObject(s[t])?e[t]=Q(t,a)(i[t],s[t],a):e[t]=j(s[t],a))}),e}var E=function(s,a,e){e=e||{},e.arrayMerge=e.arrayMerge||J,e.isMergeableObject=e.isMergeableObject||U,e.cloneUnlessOtherwiseSpecified=j;var t=Array.isArray(a),r=Array.isArray(s),n=t===r;return n?t?e.arrayMerge(s,a,e):ie(s,a,e):j(a,e)},D=function(s){return typeof s=="object"&&typeof s.nodeType<"u"?s:typeof s=="string"?document.querySelector(s):null},_=function(s,a,e,t){t===void 0&&(t=!1);var r=document.createElement(s);return e&&(r[t?"innerHTML":"textContent"]=e),a&&(r.className=a),r},se=function(s,a){return Element.prototype.querySelector.call(s,a)},A=function(s){s.parentNode.removeChild(s)},ae=function(s){return/\.(jpg|gif|png)$/.test(s)},re=function(s){return s.replace(/[\w]([A-Z])/g,function(a){return a[0]+"-"+a[1]}).toLowerCase()},m=function(s,a,e){return e===void 0&&(e=!1),e?E(s,a):Object.assign(s,a)},T=function(s,a){return s.toLowerCase()+":to:"+a.toLowerCase()},V=function(s,a){Object.assign(s.prototype,a)},M={},ne=1,d={on:function(s,a,e,t){t===void 0&&(t={});var r="jvm:"+a+"::"+ne++;M[r]={selector:s,handler:e},e._uid=r,s.addEventListener(a,e,t)},delegate:function(s,a,e,t){a=a.split(" "),a.forEach(function(r){d.on(s,r,function(n){var o=n.target;o.matches(e)&&t.call(o,n)})})},off:function(s,a,e){var t=a.split(":")[1];s.removeEventListener(t,e),delete M[e._uid]},flush:function(){Object.keys(M).forEach(function(s){d.off(M[s].selector,s,M[s].handler)})},getEventRegistry:function(){return M}};function oe(){var i=this,s=this,a=!1,e,t;this.params.draggable&&(d.on(this.container,"mousemove",function(r){if(!a)return!1;s.transX-=(e-r.pageX)/s.scale,s.transY-=(t-r.pageY)/s.scale,s._applyTransform(),e=r.pageX,t=r.pageY}),d.on(this.container,"mousedown",function(r){return a=!0,e=r.pageX,t=r.pageY,!1}),d.on(document.body,"mouseup",function(){a=!1})),this.params.zoomOnScroll&&d.on(this.container,"wheel",function(r){var n=((r.deltaY||-r.wheelDelta||r.detail)>>10||1)*75,o=i.container.getBoundingClientRect(),l=r.pageX-o.left-window.pageXOffset,u=r.pageY-o.top-window.pageYOffset,c=Math.pow(1+s.params.zoomOnScrollSpeed/1e3,-1.5*n);s.tooltip&&s._tooltip.hide(),s._setScale(s.scale*c,l,u),r.preventDefault()})}var v={onLoaded:"map:loaded",onViewportChange:"viewport:changed",onRegionClick:"region:clicked",onMarkerClick:"marker:clicked",onRegionSelected:"region:selected",onMarkerSelected:"marker:selected",onRegionTooltipShow:"region.tooltip:show",onMarkerTooltipShow:"marker.tooltip:show",onDestroyed:"map:destroyed"},X=function(s,a,e){var t=D(a),r=t.getAttribute("class").indexOf("jvm-region")===-1?"marker":"region",n=r==="region",o=n?t.getAttribute("data-code"):t.getAttribute("data-index"),l=n?v.onRegionSelected:v.onMarkerSelected;return e&&(l=n?v.onRegionTooltipShow:v.onMarkerTooltipShow),{type:r,code:o,event:l,element:n?s.regions[o].element:s._markers[o].element,tooltipText:n?s._mapData.paths[o].name||"":s._markers[o].config.name||""}};function le(){var i=this,s=this.container,a,e,t;d.on(s,"mousemove",function(r){Math.abs(a-r.pageX)+Math.abs(e-r.pageY)>2&&(t=!0)}),d.delegate(s,"mousedown",".jvm-element",function(r){a=r.pageX,e=r.pageY,t=!1}),d.delegate(s,"mouseover mouseout",".jvm-element",function(r){var n=X(i,this,!0),o=i.params.showTooltip;r.type==="mouseover"?(n.element.hover(!0),o&&(i._tooltip.text(n.tooltipText),i._tooltip.show(),i._emit(n.event,[r,i._tooltip,n.code]))):(n.element.hover(!1),o&&i._tooltip.hide())}),d.delegate(s,"mouseup",".jvm-element",function(r){var n=X(i,this);if(!t&&(n.type==="region"&&i.params.regionsSelectable||n.type==="marker"&&i.params.markersSelectable)){var o=n.element;i.params[n.type+"sSelectableOne"]&&i._clearSelected(n.type+"s"),n.element.isSelected?o.select(!1):o.select(!0),i._emit(n.event,[n.code,o.isSelected,i._getSelected(n.type+"s")])}}),d.delegate(s,"click",".jvm-element",function(r){var n=X(i,this),o=n.type,l=n.code;i._emit(o==="region"?v.onRegionClick:v.onMarkerClick,[r,l])})}function he(){var i=this,s=_("div","jvm-zoom-btn jvm-zoomin","&#43;",!0),a=_("div","jvm-zoom-btn jvm-zoomout","&#x2212",!0);this.container.appendChild(s),this.container.appendChild(a);var e=function(r){return r===void 0&&(r=!0),function(){return i._setScale(r?i.scale*i.params.zoomStep:i.scale/i.params.zoomStep,i._width/2,i._height/2,!1,i.params.zoomAnimate)}};d.on(s,"click",e()),d.on(a,"click",e(!1))}function ce(){var i=this,s,a,e,t,r,n,o,l=function(c){var h=c.touches,f,p,g,w;if(c.type=="touchstart"&&(o=0),h.length==1)o==1&&(g=i.transX,w=i.transY,i.transX-=(e-h[0].pageX)/i.scale,i.transY-=(t-h[0].pageY)/i.scale,i._tooltip.hide(),i._applyTransform(),(g!=i.transX||w!=i.transY)&&c.preventDefault()),e=h[0].pageX,t=h[0].pageY;else if(h.length==2)if(o==2)p=Math.sqrt(Math.pow(h[0].pageX-h[1].pageX,2)+Math.pow(h[0].pageY-h[1].pageY,2))/a,i._setScale(s*p,r,n),i._tooltip.hide(),c.preventDefault();else{var S=i.container.getBoundingClientRect();f={top:S.top+window.scrollY,left:S.left+window.scrollX},h[0].pageX>h[1].pageX?r=h[1].pageX+(h[0].pageX-h[1].pageX)/2:r=h[0].pageX+(h[1].pageX-h[0].pageX)/2,h[0].pageY>h[1].pageY?n=h[1].pageY+(h[0].pageY-h[1].pageY)/2:n=h[0].pageY+(h[1].pageY-h[0].pageY)/2,r-=f.left,n-=f.top,s=i.scale,a=Math.sqrt(Math.pow(h[0].pageX-h[1].pageX,2)+Math.pow(h[0].pageY-h[1].pageY,2))}o=h.length};d.on(i.container,"touchstart",l),d.on(i.container,"touchmove",l)}function R(i,s){(s==null||s>i.length)&&(s=i.length);for(var a=0,e=Array(s);a<s;a++)e[a]=i[a];return e}function ue(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function fe(i,s){var a=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(a)return(a=a.call(i)).next.bind(a);if(Array.isArray(i)||(a=pe(i))||s&&i&&typeof i.length=="number"){a&&(i=a);var e=0;return function(){return e>=i.length?{done:!0}:{done:!1,value:i[e++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function C(){return C=Object.assign?Object.assign.bind():function(i){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var e in a)({}).hasOwnProperty.call(a,e)&&(i[e]=a[e])}return i},C.apply(null,arguments)}function b(i,s){i.prototype=Object.create(s.prototype),i.prototype.constructor=i,P(i,s)}function P(i,s){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,e){return a.__proto__=e,a},P(i,s)}function pe(i,s){if(i){if(typeof i=="string")return R(i,s);var a={}.toString.call(i).slice(8,-1);return a==="Object"&&i.constructor&&(a=i.constructor.name),a==="Map"||a==="Set"?Array.from(i):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?R(i,s):void 0}}var O=function(){function i(){}var s=i.prototype;return s.dispose=function(){this._tooltip?A(this._tooltip):this.shape.remove();for(var e=fe(Object.getOwnPropertyNames(this)),t;!(t=e()).done;){var r=t.value;this[r]=null}},i}(),H={getLabelText:function(s,a){if(a){if(typeof a.render=="function"){var e=[];return this.config&&this.config.marker&&e.push(this.config.marker),e.push(s),a.render.apply(this,e)}return s}},getLabelOffsets:function(s,a){return typeof a.offsets=="function"?a.offsets(s):Array.isArray(a.offsets)?a.offsets[s]:[0,0]},setStyle:function(s,a){this.shape.setStyle(s,a)},remove:function(){this.shape.remove(),this.label&&this.label.remove()},hover:function(s){this._setStatus("isHovered",s)},select:function(s){this._setStatus("isSelected",s)},_setStatus:function(s,a){this.shape[s]=a,this.shape.updateStyle(),this[s]=a,this.label&&(this.label[s]=a,this.label.updateStyle())}},G=function(i){function s(e){var t,r=e.map,n=e.code,o=e.path,l=e.style,u=e.label,c=e.labelStyle,h=e.labelsGroup;t=i.call(this)||this,t._map=r,t.shape=t._createRegion(o,n,l);var f=t.getLabelText(n,u);if(u&&f){var p=t.shape.getBBox(),g=t.getLabelOffsets(n,u);t.labelX=p.x+p.width/2+g[0],t.labelY=p.y+p.height/2+g[1],t.label=t._map.canvas.createText({text:f,textAnchor:"middle",alignmentBaseline:"central",dataCode:n,x:t.labelX,y:t.labelY},c,h),t.label.addClass("jvm-region jvm-element")}return t}b(s,i);var a=s.prototype;return a._createRegion=function(t,r,n){return t=this._map.canvas.createPath({d:t,dataCode:r},n),t.addClass("jvm-region jvm-element"),t},a.updateLabelPosition=function(){this.label&&this.label.set({x:this.labelX*this._map.scale+this._map.transX*this._map.scale,y:this.labelY*this._map.scale+this._map.transY*this._map.scale})},s}(O);V(G,H);function de(){this._regionLabelsGroup=this._regionLabelsGroup||this.canvas.createGroup("jvm-regions-labels-group");for(var i in this._mapData.paths){var s=new G({map:this,code:i,path:this._mapData.paths[i].path,style:m({},this.params.regionStyle),labelStyle:this.params.regionLabelStyle,labelsGroup:this._regionLabelsGroup,label:this.params.labels&&this.params.labels.regions});this.regions[i]={config:this._mapData.paths[i],element:s}}}var me=function(i){function s(e){var t,r=e.index,n=e.map,o=e.style,l=e.x1,u=e.y1,c=e.x2,h=e.y2,f=e.group,p=e.config;return t=i.call(this)||this,t.config=p,t.shape=n.canvas.createLine({x1:l,y1:u,x2:c,y2:h,dataIndex:r},o,f),t.shape.addClass("jvm-line"),t}b(s,i);var a=s.prototype;return a.setStyle=function(t,r){this.shape.setStyle(t,r)},s}(O);function ve(i,s,a){a===void 0&&(a=!1);var e=!1,t=!1;this.linesGroup=this.linesGroup||this.canvas.createGroup("jvm-lines-group");for(var r in i){var n=i[r];for(var o in s){var l=a?s[o].config:s[o];l.name===n.from&&(e=this.getMarkerPosition(l)),l.name===n.to&&(t=this.getMarkerPosition(l))}e!==!1&&t!==!1&&(this._lines[T(n.from,n.to)]=new me({index:r,map:this,style:m({initial:this.params.lineStyle},{initial:n.style||{}},!0),x1:e.x,y1:e.y,x2:t.x,y2:t.y,group:this.linesGroup,config:n}))}}var F=function(i){function s(e){var t,r=e.index,n=e.style,o=e.label,l=e.cx,u=e.cy,c=e.map,h=e.group;return t=i.call(this)||this,t._map=c,t._isImage=!!n.initial.image,t.config=arguments[0],t.shape=c.canvas[t._isImage?"createImage":"createCircle"]({dataIndex:r,cx:l,cy:u},n,h),t.shape.addClass("jvm-marker jvm-element"),t._isImage&&t.updateLabelPosition(),o&&t._createLabel(t.config),t}b(s,i);var a=s.prototype;return a.updateLabelPosition=function(){this.label&&this.label.set({x:this._labelX*this._map.scale+this._offsets[0]+this._map.transX*this._map.scale+5+(this._isImage?(this.shape.width||0)/2:this.shape.node.r.baseVal.value),y:this._labelY*this._map.scale+this._map.transY*this._map.scale+this._offsets[1]})},a._createLabel=function(t){var r=t.index,n=t.map,o=t.label,l=t.labelsGroup,u=t.cx,c=t.cy,h=t.marker,f=t.isRecentlyCreated,p=this.getLabelText(r,o);this._labelX=u/n.scale-n.transX,this._labelY=c/n.scale-n.transY,this._offsets=f&&h.offsets?h.offsets:this.getLabelOffsets(r,o),this.label=n.canvas.createText({text:p,dataIndex:r,x:this._labelX,y:this._labelY,dy:"0.6ex"},n.params.markerLabelStyle,l),this.label.addClass("jvm-marker jvm-element"),f&&this.updateLabelPosition()},s}(O);V(F,H);function ge(i,s){var a=this;i===void 0&&(i={}),s===void 0&&(s=!1),this._markersGroup=this._markersGroup||this.canvas.createGroup("jvm-markers-group"),this._markerLabelsGroup=this._markerLabelsGroup||this.canvas.createGroup("jvm-markers-labels-group");var e=function(){var o=i[r],l=a.getMarkerPosition(o),u=o.coords.join(":");if(!l)return 0;if(s){if(Object.keys(a._markers).filter(function(h){return a._markers[h]._uid===u}).length)return 0;r=Object.keys(a._markers).length}var c=new F({index:r,map:a,style:m(a.params.markerStyle,C({},o.style||{}),!0),label:a.params.labels&&a.params.labels.markers,labelsGroup:a._markerLabelsGroup,cx:l.x,cy:l.y,group:a._markersGroup,marker:o,isRecentlyCreated:s});a._markers[r]&&a.removeMarkers([r]),a._markers[r]={_uid:u,config:o,element:c}},t;for(var r in i)t=e()}var _e=function(){function i(a){a===void 0&&(a={}),this._options=a,this._map=this._options.map,this._series=this._options.series,this._body=_("div","jvm-legend"),this._options.cssClass&&this._body.setAttribute("class",this._options.cssClass),a.vertical?this._map.legendVertical.appendChild(this._body):this._map.legendHorizontal.appendChild(this._body),this.render()}var s=i.prototype;return s.render=function(){var e=this._series.scale.getTicks(),t=_("div","jvm-legend-inner");if(this._body.innderHTML="",this._options.title){var r=_("div","jvm-legend-title",this._options.title);this._body.appendChild(r)}this._body.appendChild(t);for(var n=0;n<e.length;n++){var o=_("div","jvm-legend-tick"),l=_("div","jvm-legend-tick-sample");switch(this._series.config.attribute){case"fill":ae(e[n].value)?l.style.background="url("+e[n].value+")":l.style.background=e[n].value;break;case"stroke":l.style.background=e[n].value;break;case"image":l.style.background="url("+(typeof e[n].value=="object"?e[n].value.url:e[n].value)+") no-repeat center center",l.style.backgroundSize="cover";break}o.appendChild(l);var u=e[n].label;this._options.labelRender&&(u=this._options.labelRender(u));var c=_("div","jvm-legend-tick-text",u);o.appendChild(c),t.appendChild(o)}},i}(),ye=function(){function i(a){this._scale=a}var s=i.prototype;return s.getValue=function(e){return this._scale[e]},s.getTicks=function(){var e=[];for(var t in this._scale)e.push({label:t,value:this._scale[t]});return e},i}(),be=function(){function i(a,e,t){a===void 0&&(a={}),this._map=t,this._elements=e,this._values=a.values||{},this.config=a,this.config.attribute=a.attribute||"fill",a.attributes&&this.setAttributes(a.attributes),typeof a.scale=="object"&&(this.scale=new ye(a.scale)),this.config.legend&&(this.legend=new _e(m({map:this._map,series:this},this.config.legend))),this.setValues(this._values)}var s=i.prototype;return s.setValues=function(e){var t={};for(var r in e)e[r]&&(t[r]=this.scale.getValue(e[r]));this.setAttributes(t)},s.setAttributes=function(e){for(var t in e)this._elements[t]&&this._elements[t].element.setStyle(this.config.attribute,e[t])},s.clear=function(){var e,t={};for(e in this._values)this._elements[e]&&(t[e]=this._elements[e].element.shape.style.initial[this.config.attribute]);this.setAttributes(t),this._values={}},i}();function Se(){this.series={markers:[],regions:[]};for(var i in this.params.series)for(var s=0;s<this.params.series[i].length;s++)this.series[i][s]=new be(this.params.series[i][s],i==="markers"?this._markers:this.regions,this)}function Me(){var i,s,a,e;this._defaultWidth*this.scale<=this._width?(i=(this._width-this._defaultWidth*this.scale)/(2*this.scale),a=(this._width-this._defaultWidth*this.scale)/(2*this.scale)):(i=0,a=(this._width-this._defaultWidth*this.scale)/this.scale),this._defaultHeight*this.scale<=this._height?(s=(this._height-this._defaultHeight*this.scale)/(2*this.scale),e=(this._height-this._defaultHeight*this.scale)/(2*this.scale)):(s=0,e=(this._height-this._defaultHeight*this.scale)/this.scale),this.transY>s?this.transY=s:this.transY<e&&(this.transY=e),this.transX>i?this.transX=i:this.transX<a&&(this.transX=a),this.canvas.applyTransformParams(this.scale,this.transX,this.transY),this._markers&&this._repositionMarkers(),this._lines&&this._repositionLines(),this._repositionLabels()}function we(){var i=this._baseScale;this._width/this._height>this._defaultWidth/this._defaultHeight?(this._baseScale=this._height/this._defaultHeight,this._baseTransX=Math.abs(this._width-this._defaultWidth*this._baseScale)/(2*this._baseScale)):(this._baseScale=this._width/this._defaultWidth,this._baseTransY=Math.abs(this._height-this._defaultHeight*this._baseScale)/(2*this._baseScale)),this.scale*=this._baseScale/i,this.transX*=this._baseScale/i,this.transY*=this._baseScale/i}function xe(i,s,a,e,t){var r=this,n,o,l=0,u=Math.abs(Math.round((i-this.scale)*60/Math.max(i,this.scale))),c,h,f,p,g,w,S,L;i>this.params.zoomMax*this._baseScale?i=this.params.zoomMax*this._baseScale:i<this.params.zoomMin*this._baseScale&&(i=this.params.zoomMin*this._baseScale),typeof s<"u"&&typeof a<"u"&&(n=i/this.scale,e?(S=s+this._defaultWidth*(this._width/(this._defaultWidth*i))/2,L=a+this._defaultHeight*(this._height/(this._defaultHeight*i))/2):(S=this.transX-(n-1)/i*s,L=this.transY-(n-1)/i*a)),t&&u>0?(c=this.scale,h=(i-c)/u,f=this.transX*this.scale,g=this.transY*this.scale,p=(S*i-f)/u,w=(L*i-g)/u,o=setInterval(function(){l+=1,r.scale=c+h*l,r.transX=(f+p*l)/r.scale,r.transY=(g+w*l)/r.scale,r._applyTransform(),l==u&&(clearInterval(o),r._emit(v.onViewportChange,[r.scale,r.transX,r.transY]))},10)):(this.transX=S,this.transY=L,this.scale=i,this._applyTransform(),this._emit(v.onViewportChange,[this.scale,this.transX,this.transY]))}function ke(i){var s=this;i===void 0&&(i={});var a,e=[];if(i.region?e.push(i.region):i.regions&&(e=i.regions),e.length)return e.forEach(function(o){if(s.regions[o]){var l=s.regions[o].element.shape.getBBox();l&&(typeof a>"u"?a=l:a={x:Math.min(a.x,l.x),y:Math.min(a.y,l.y),width:Math.max(a.x+a.width,l.x+l.width)-Math.min(a.x,l.x),height:Math.max(a.y+a.height,l.y+l.height)-Math.min(a.y,l.y)})}}),this._setScale(Math.min(this._width/a.width,this._height/a.height),-(a.x+a.width/2),-(a.y+a.height/2),!0,i.animate);if(i.coords){var t=this.coordsToPoint(i.coords[0],i.coords[1]),r=this.transX-t.x/this.scale,n=this.transY-t.y/this.scale;return this._setScale(i.scale*this._baseScale,r,n,!0,i.animate)}}function je(){this._width=this.container.offsetWidth,this._height=this.container.offsetHeight,this._resize(),this.canvas.setSize(this._width,this._height),this._applyTransform()}var Y={mill:function(s,a,e){return{x:this.radius*(a-e)*this.radDeg,y:-this.radius*Math.log(Math.tan((45+.4*s)*this.radDeg))/.8}},merc:function(s,a,e){return{x:this.radius*(a-e)*this.radDeg,y:-this.radius*Math.log(Math.tan(Math.PI/4+s*Math.PI/360))}},aea:function(s,a,e){var t=0,r=e*this.radDeg,n=29.5*this.radDeg,o=45.5*this.radDeg,l=s*this.radDeg,u=a*this.radDeg,c=(Math.sin(n)+Math.sin(o))/2,h=Math.cos(n)*Math.cos(n)+2*c*Math.sin(n),f=c*(u-r),p=Math.sqrt(h-2*c*Math.sin(l))/c,g=Math.sqrt(h-2*c*Math.sin(t))/c;return{x:p*Math.sin(f)*this.radius,y:-(g-p*Math.cos(f))*this.radius}},lcc:function(s,a,e){var t=0,r=e*this.radDeg,n=a*this.radDeg,o=33*this.radDeg,l=45*this.radDeg,u=s*this.radDeg,c=Math.log(Math.cos(o)*(1/Math.cos(l)))/Math.log(Math.tan(Math.PI/4+l/2)*(1/Math.tan(Math.PI/4+o/2))),h=Math.cos(o)*Math.pow(Math.tan(Math.PI/4+o/2),c)/c,f=h*Math.pow(1/Math.tan(Math.PI/4+u/2),c),p=h*Math.pow(1/Math.tan(Math.PI/4+t/2),c);return{x:f*Math.sin(c*(n-r))*this.radius,y:-(p-f*Math.cos(c*(n-r)))*this.radius}}};Y.degRad=180/Math.PI;Y.radDeg=Math.PI/180;Y.radius=6381372;function Le(i,s){var a=y.maps[this.params.map].projection,e=Y[a.type](i,s,a.centralMeridian),t=e.x,r=e.y,n=this.getInsetForPoint(t,r);if(!n)return!1;var o=n.bbox;return t=(t-o[0].x)/(o[1].x-o[0].x)*n.width*this.scale,r=(r-o[0].y)/(o[1].y-o[0].y)*n.height*this.scale,{x:t+this.transX*this.scale+n.left*this.scale,y:r+this.transY*this.scale+n.top*this.scale}}function Te(i,s){for(var a=y.maps[this.params.map].insets,e=0;e<a.length;e++){var t=a[e].bbox,r=t[0],n=t[1];if(i>r.x&&i<n.x&&s>r.y&&s<n.y)return a[e]}}function Ee(i){var s=i.coords;return y.maps[this.params.map].projection?this.coordsToPoint.apply(this,s):{x:s[0]*this.scale+this.transX*this.scale,y:s[1]*this.scale+this.transY*this.scale}}function Ae(){var i=!1,s=!1;for(var a in this._lines){for(var e in this._markers){var t=this._markers[e];t.config.name===this._lines[a].config.from&&(i=this.getMarkerPosition(t.config)),t.config.name===this._lines[a].config.to&&(s=this.getMarkerPosition(t.config))}i!==!1&&s!==!1&&this._lines[a].setStyle({x1:i.x,y1:i.y,x2:s.x,y2:s.y})}}function Oe(){for(var i in this._markers){var s=this.getMarkerPosition(this._markers[i].config);s!==!1&&this._markers[i].element.setStyle({cx:s.x,cy:s.y})}}function Ye(){var i=this.params.labels;if(i){if(i.regions)for(var s in this.regions)this.regions[s].element.updateLabelPosition();if(i.markers)for(var a in this._markers)this._markers[a].element.updateLabelPosition()}}var Xe={_setupContainerEvents:oe,_setupElementEvents:le,_setupZoomButtons:he,_setupContainerTouchEvents:ce,_createRegions:de,_createLines:ve,_createMarkers:ge,_createSeries:Se,_applyTransform:Me,_resize:we,_setScale:xe,setFocus:ke,updateSize:je,coordsToPoint:Le,getInsetForPoint:Te,getMarkerPosition:Ee,_repositionLines:Ae,_repositionMarkers:Oe,_repositionLabels:Ye},Ce={map:"world",backgroundColor:"transparent",draggable:!0,zoomButtons:!0,zoomOnScroll:!0,zoomOnScrollSpeed:3,zoomMax:12,zoomMin:1,zoomAnimate:!0,showTooltip:!0,zoomStep:1.5,bindTouchEvents:!0,lineStyle:{stroke:"#808080",strokeWidth:1,strokeLinecap:"round"},markersSelectable:!1,markersSelectableOne:!1,markerStyle:{initial:{r:7,fill:"#374151",fillOpacity:1,stroke:"#FFF",strokeWidth:5,strokeOpacity:.5},hover:{fill:"#3cc0ff",cursor:"pointer"},selected:{fill:"blue"},selectedHover:{}},markerLabelStyle:{initial:{fontFamily:"Verdana",fontSize:12,fontWeight:500,cursor:"default",fill:"#374151"},hover:{cursor:"pointer"},selected:{},selectedHover:{}},regionsSelectable:!1,regionsSelectableOne:!1,regionStyle:{initial:{fill:"#dee2e8",fillOpacity:1,stroke:"none",strokeWidth:0},hover:{fillOpacity:.7,cursor:"pointer"},selected:{fill:"#9ca3af"},selectedHover:{}},regionLabelStyle:{initial:{fontFamily:"Verdana",fontSize:"12",fontWeight:"bold",cursor:"default",fill:"#35373e"},hover:{cursor:"pointer"}}},x=function(){function i(a,e){this.node=this._createElement(a),e&&this.set(e)}var s=i.prototype;return s._createElement=function(e){return document.createElementNS("http://www.w3.org/2000/svg",e)},s.addClass=function(e){this.node.setAttribute("class",e)},s.getBBox=function(){return this.node.getBBox()},s.set=function(e,t){if(typeof e=="object")for(var r in e)this.applyAttr(r,e[r]);else this.applyAttr(e,t)},s.get=function(e){return this.style.initial[e]},s.applyAttr=function(e,t){this.node.setAttribute(re(e),t)},s.remove=function(){A(this.node)},i}(),k=function(i){function s(e,t,r){var n;return r===void 0&&(r={}),n=i.call(this,e,t)||this,n.isHovered=!1,n.isSelected=!1,n.style=r,n.style.current={},n.updateStyle(),n}b(s,i);var a=s.prototype;return a.setStyle=function(t,r){if(typeof t=="object")m(this.style.current,t);else{var n;m(this.style.current,(n={},n[t]=r,n))}this.updateStyle()},a.updateStyle=function(){var t={};m(t,this.style.initial),m(t,this.style.current),this.isHovered&&m(t,this.style.hover),this.isSelected&&(m(t,this.style.selected),this.isHovered&&m(t,this.style.selectedHover)),this.set(t)},s}(x),Pe=function(i){function s(e,t){return i.call(this,"text",e,t)||this}b(s,i);var a=s.prototype;return a.applyAttr=function(t,r){t==="text"?this.node.textContent=r:i.prototype.applyAttr.call(this,t,r)},s}(k),ze=function(i){function s(e,t){return i.call(this,"image",e,t)||this}b(s,i);var a=s.prototype;return a.applyAttr=function(t,r){var n;t==="image"?(typeof r=="object"?(n=r.url,this.offset=r.offset||[0,0]):(n=r,this.offset=[0,0]),this.node.setAttributeNS("http://www.w3.org/1999/xlink","href",n),this.width=23,this.height=23,this.applyAttr("width",this.width),this.applyAttr("height",this.height),this.applyAttr("x",this.cx-this.width/2+this.offset[0]),this.applyAttr("y",this.cy-this.height/2+this.offset[1])):t=="cx"?(this.cx=r,this.width&&this.applyAttr("x",r-this.width/2+this.offset[0])):t=="cy"?(this.cy=r,this.height&&this.applyAttr("y",r-this.height/2+this.offset[1])):i.prototype.applyAttr.apply(this,arguments)},s}(k),Re=function(i){function s(e){var t;return t=i.call(this,"svg")||this,t._container=e,t._defsElement=new x("defs"),t._rootElement=new x("g",{id:"jvm-regions-group"}),t.node.appendChild(t._defsElement.node),t.node.appendChild(t._rootElement.node),t._container.appendChild(t.node),t}b(s,i);var a=s.prototype;return a.setSize=function(t,r){this.node.setAttribute("width",t),this.node.setAttribute("height",r)},a.applyTransformParams=function(t,r,n){this._rootElement.node.setAttribute("transform","scale("+t+") translate("+r+", "+n+")")},a.createPath=function(t,r){var n=new k("path",t,r);return n.node.setAttribute("fill-rule","evenodd"),this._add(n)},a.createCircle=function(t,r,n){var o=new k("circle",t,r);return this._add(o,n)},a.createLine=function(t,r,n){var o=new k("line",t,r);return this._add(o,n)},a.createText=function(t,r,n){var o=new Pe(t,r);return this._add(o,n)},a.createImage=function(t,r,n){var o=new ze(t,r);return this._add(o,n)},a.createGroup=function(t){var r=new x("g");return this.node.appendChild(r.node),t&&(r.node.id=t),r.canvas=this,r},a._add=function(t,r){return r=r||this._rootElement,r.node.appendChild(t.node),t},s}(x),Ie=function(i){function s(e){var t;t=i.call(this)||this;var r=_("div","jvm-tooltip");return t._map=e,t._tooltip=document.body.appendChild(r),t._bindEventListeners(),t||ue(t)}b(s,i);var a=s.prototype;return a._bindEventListeners=function(){var t=this;d.on(this._map.container,"mousemove",function(r){if(t._tooltip.classList.contains("active")){var n=se(t._map.container,"#jvm-regions-group").getBoundingClientRect(),o=5,l=t._tooltip.getBoundingClientRect(),u=l.height,c=l.width,h=r.clientY<=n.top+u+o,f=r.pageY-u-o,p=r.pageX-c-o;h&&(f+=u+o,p-=o*2),r.clientX<n.left+c+o&&(p=r.pageX+o+2,h&&(p+=o*2)),t.css({top:f+"px",left:p+"px"})}})},a.getElement=function(){return this._tooltip},a.show=function(){this._tooltip.classList.add("active")},a.hide=function(){this._tooltip.classList.remove("active")},a.text=function(t,r){r===void 0&&(r=!1);var n=r?"innerHTML":"textContent";if(!t)return this._tooltip[n];this._tooltip[n]=t},a.css=function(t){for(var r in t)this._tooltip.style[r]=t[r];return this},s}(O),De=function(){function i(a,e){var t=a.scale,r=a.values;this._scale=t,this._values=r,this._fromColor=this.hexToRgb(t[0]),this._toColor=this.hexToRgb(t[1]),this._map=e,this.setMinMaxValues(r),this.visualize()}var s=i.prototype;return s.setMinMaxValues=function(e){this.min=Number.MAX_VALUE,this.max=0;for(var t in e)t=parseFloat(e[t]),t>this.max&&(this.max=t),t<this.min&&(this.min=t)},s.visualize=function(){var e={},t;for(var r in this._values)t=parseFloat(this._values[r]),isNaN(t)||(e[r]=this.getValue(t));this.setAttributes(e)},s.setAttributes=function(e){for(var t in e)this._map.regions[t]&&this._map.regions[t].element.setStyle("fill",e[t])},s.getValue=function(e){if(this.min===this.max)return"#"+this._toColor.join("");for(var t,r="#",n=0;n<3;n++)t=Math.round(this._fromColor[n]+(this._toColor[n]-this._fromColor[n])*((e-this.min)/(this.max-this.min))).toString(16),r+=(t.length===1?"0":"")+t;return r},s.hexToRgb=function(e){var t=0,r=0,n=0;return e.length==4?(t="0x"+e[1]+e[1],r="0x"+e[2]+e[2],n="0x"+e[3]+e[3]):e.length==7&&(t="0x"+e[1]+e[2],r="0x"+e[3]+e[4],n="0x"+e[5]+e[6]),[parseInt(t),parseInt(r),parseInt(n)]},i}(),y=function(){function i(a){var e=this;if(a===void 0&&(a={}),this.params=m(i.defaults,a,!0),!i.maps[this.params.map])throw new Error("Attempt to use map which was not loaded: "+a.map);this.regions={},this.scale=1,this.transX=0,this.transY=0,this._mapData=i.maps[this.params.map],this._markers={},this._lines={},this._defaultWidth=this._mapData.width,this._defaultHeight=this._mapData.height,this._height=0,this._width=0,this._baseScale=1,this._baseTransX=0,this._baseTransY=0,document.readyState!=="loading"?this._init():window.addEventListener("DOMContentLoaded",function(){return e._init()})}var s=i.prototype;return s._init=function(){var e=this.params;this.container=D(e.selector),this.container.classList.add("jvm-container"),this.canvas=new Re(this.container),this.setBackgroundColor(e.backgroundColor),this._createRegions(),this.updateSize(),this._createLines(e.lines||{},e.markers||{}),this._createMarkers(e.markers),this._repositionLabels(),this._setupContainerEvents(),this._setupElementEvents(),e.zoomButtons&&this._setupZoomButtons(),e.showTooltip&&(this._tooltip=new Ie(this)),e.selectedRegions&&this._setSelected("regions",e.selectedRegions),e.selectedMarkers&&this._setSelected("_markers",e.selectedMarkers),e.focusOn&&this.setFocus(e.focusOn),e.visualizeData&&(this.dataVisualization=new De(e.visualizeData,this)),e.bindTouchEvents&&("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)&&this._setupContainerTouchEvents(),e.series&&(this.container.appendChild(this.legendHorizontal=_("div","jvm-series-container jvm-series-h")),this.container.appendChild(this.legendVertical=_("div","jvm-series-container jvm-series-v")),this._createSeries()),this._emit(v.onLoaded,[this])},s.setBackgroundColor=function(e){this.container.style.backgroundColor=e},s.getSelectedRegions=function(){return this._getSelected("regions")},s.clearSelectedRegions=function(e){var t=this;e===void 0&&(e=void 0),e=this._normalizeRegions(e)||this._getSelected("regions"),e.forEach(function(r){t.regions[r].element.select(!1)})},s.setSelectedRegions=function(e){this.clearSelectedRegions(),this._setSelected("regions",this._normalizeRegions(e))},s.getSelectedMarkers=function(){return this._getSelected("_markers")},s.clearSelectedMarkers=function(){this._clearSelected("_markers")},s.addMarkers=function(e){e=Array.isArray(e)?e:[e],this._createMarkers(e,!0)},s.removeMarkers=function(e){var t=this;e||(e=Object.keys(this._markers)),e.forEach(function(r){t._markers[r].element.remove(),delete t._markers[r]})},s.addLine=function(e,t,r){r===void 0&&(r={}),console.warn("`addLine` method is deprecated, please use `addLines` instead."),this._createLines([{from:e,to:t,style:r}],this._markers,!0)},s.addLines=function(e){var t=this._getLinesAsUids();Array.isArray(e)||(e=[e]),this._createLines(e.filter(function(r){return!(t.indexOf(T(r.from,r.to))>-1)}),this._markers,!0)},s.removeLines=function(e){var t=this;Array.isArray(e)?e=e.map(function(r){return T(r.from,r.to)}):e=this._getLinesAsUids(),e.forEach(function(r){t._lines[r].dispose(),delete t._lines[r]})},s.removeLine=function(e,t){console.warn("`removeLine` method is deprecated, please use `removeLines` instead.");var r=T(e,t);this._lines.hasOwnProperty(r)&&(this._lines[r].element.remove(),delete this._lines[r])},s.reset=function(){for(var e in this.series)for(var t=0;t<this.series[e].length;t++)this.series[e][t].clear();this.legendHorizontal&&(A(this.legendHorizontal),this.legendHorizontal=null),this.legendVertical&&(A(this.legendVertical),this.legendVertical=null),this.scale=this._baseScale,this.transX=this._baseTransX,this.transY=this._baseTransY,this._applyTransform(),this.clearSelectedMarkers(),this.clearSelectedRegions(),this.removeMarkers()},s.destroy=function(e){var t=this;e===void 0&&(e=!0),d.flush(),this._tooltip.dispose(),this._emit(v.onDestroyed),e&&Object.keys(this).forEach(function(r){try{delete t[r]}catch{}})},s.extend=function(e,t){if(typeof this[e]=="function")throw new Error("The method ["+e+"] does already exist, please use another name.");i.prototype[e]=t},s._emit=function(e,t){for(var r in v)v[r]===e&&typeof this.params[r]=="function"&&this.params[r].apply(this,t)},s._getSelected=function(e){var t=[];for(var r in this[e])this[e][r].element.isSelected&&t.push(r);return t},s._setSelected=function(e,t){var r=this;t.forEach(function(n){r[e][n]&&r[e][n].element.select(!0)})},s._clearSelected=function(e){var t=this;this._getSelected(e).forEach(function(r){t[e][r].element.select(!1)})},s._getLinesAsUids=function(){return Object.keys(this._lines)},s._normalizeRegions=function(e){return typeof e=="string"?[e]:e},i}();y.maps={};y.defaults=Ce;Object.assign(y.prototype,Xe);var Ve=function(){function i(s){if(s===void 0&&(s={}),!s.selector)throw new Error("Selector is not given.");return new y(s)}return i.addMap=function(a,e){y.maps[a]=e},i}(),He=window.jsVectorMap=Ve;export{He as i};
